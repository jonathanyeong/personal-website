---
import type { CollectionEntry } from 'astro:content';
import { getCollection } from 'astro:content';
import { ghostClient } from '../../lib/ghost';
import BlogPost from '../../layouts/BlogPost.astro';
export async function getStaticPaths() {
	// const posts = await getCollection('blog');
	// return posts.map((post) => ({
	// 	params: { slug: post.slug },
	// 	props: post,
	// }));
	const posts = await ghostClient.posts
		.browse({
				limit: 'all',
		})
		.catch((err) => {
				console.error(err);
		});

	return posts?.map((post) => {
        return {
            params: {
                slug: post.slug,
            },
            props: {
                post: post,
            },
        };
    });
}
const { post } = Astro.props;
// type Props = CollectionEntry<'blog'>;

// const post = Astro.props;
// const { Content, remarkPluginFrontmatter } = await post.render();
// const postData = { minutesRead: remarkPluginFrontmatter.minutesRead, ...post.data }

---
<!--
<BlogPost {...postData}>
	<Content />
</BlogPost> -->


<h1>{post.title}</h1>
<p>{post.reading_time} min read</p>

<Fragment set:html={post.html} />