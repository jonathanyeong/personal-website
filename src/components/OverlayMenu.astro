---
import { Icon } from 'astro-icon/components';
---

<script>
  const closeNav = () => {
    const nav = document.getElementById("myNav");

    nav && (nav.classList.remove('active'));
    document.body.classList.remove("no-scroll");
  }

  const menuToggle: HTMLElement | null = document.getElementById("closeNav");
  menuToggle && menuToggle.addEventListener("click", closeNav);
</script>

<div id="myNav" class="overlay-container">
  <div class="overlay wrapper flow">
    <div class="close-row">
      <span id="closeNav"><Icon name="close" /></span>
    </div>
    <ul class="menu-items">
      <li><a href="/">Home</a></li>
      <li><a href="/writing">Writing</a></li>
      <li><a href="/about">About</a></li>
      <!-- <li><a href="/now">Now</a></li> -->
      <li><a href="/rss.xml/">RSS</a></li>
    </ul>
  </div>
</div>

<style>
  .overlay-container {
    display: block;
    position: fixed;
    top: 0;
    right: -100%; /* Start off-screen to the left */
    height: 100vh;
    width: 100vw;
    background-color: var(--color-overlay-bg);
    z-index: 100;
    transition: right 0.3s ease; /* Transition for the slide effect */
    overflow-y: auto; /* Allow scrolling if menu is tall */
  }

  .overlay-container.active {
    right: 0; /* Slide to visible position */
  }

  .overlay {
    --gutter: var(--space-m);
    padding-top: var(--space-s);
  }

  .menu-items {
    list-style: none;
    padding: 0;
    margin: 0;
    flex-grow: 1;
  }

  .menu-items li {
    opacity: 0;
    transform: translateX(-20px);
    transition: opacity 0.4s ease, transform 0.4s ease;
    transition-delay: calc(var(--item-index, 0) * 0.1s + 0.2s);
    padding-top: var(--space-m);
    padding-bottom: var(--space-m);
    border-bottom: 2px solid var(--color-text);
  }

  .overlay-container.active .menu-items li {
    opacity: 1;
    transform: translateX(0);
  }

  .menu-items a {
    text-decoration: none;
    font-size: var(--font-step-4);
    color: var(--color-text);
    transition: color var(--transition-base);
  }

  .menu-items a:hover {
    color: light-dark(var(--color-light-text), var(--color-light-accent));
  }

  span {
    cursor: pointer;
    color: var(--color-text);
    transition: color var(--transition-base);
  }

  span:hover {
    color: light-dark(var(--color-light-text), var(--color-light-accent));
  }

  [data-icon] {
    width: 1.5rem;
    height: 1.5rem;
  }

  .close-row {
    text-align: right;
  }
</style>